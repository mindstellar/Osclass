"use strict";function checkSlugs(e){const t=document.getElementById("e_country_slug"),n=document.getElementById("e_region_slug"),i=document.getElementById("e_city_slug");let o,d;"country"===e?(o=t.value,d=baseUrl+"?page=ajax&action=country_slug&slug="+o,fetch(d).then(e=>e.json()).then(e=>{1===e.error?t.setCustomValidity(stringSlugError):t.setCustomValidity("")})):"region"===e?(o=n.value,d=baseUrl+"?page=ajax&action=region_slug&slug="+o,fetch(d).then(e=>e.json()).then(e=>{1===e.error?n.setCustomValidity(stringSlugError):n.setCustomValidity("")})):"city"===e&&(o=i.value,d=baseUrl+"?page=ajax&action=city_slug&slug="+o,fetch(d).then(e=>e.json()).then(e=>{1===e.error?i.setCustomValidity(stringSlugError):i.setCustomValidity("")}))}function checkLocations(e){0<document.getElementById(e).querySelectorAll("input[type='checkbox']:checked").length?"l_countries"===e?document.getElementById("b_remove_country").classList.remove("hide"):"i_regions"===e?document.getElementById("b_remove_region").classList.remove("hide"):"i_cities"===e&&document.getElementById("b_remove_city").classList.remove("hide"):"l_countries"===e?document.getElementById("b_remove_country").classList.add("hide"):"i_regions"===e?document.getElementById("b_remove_region").classList.add("hide"):"i_cities"===e&&document.getElementById("b_remove_city").classList.add("hide")}function deleteMultipleLocations(e){let t;"country"===e?t="l_countries":"region"===e?t="i_regions":"city"===e&&(t="i_cities");var n=[{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"delete_"+e}],i=document.getElementById(t).querySelectorAll("input[type='checkbox']:checked");for(let e=0;e<i.length;e++){var o=i[e].value;n.push({name:"id[]",value:o})}toggleLocationModal(stringDeleteTitle,"",stringDelete);e=getHiddenInputs(n),document.getElementById("locationModal").querySelector(".modal-body").appendChild(e),e=document.createElement("p");e.setAttribute("class","help-block"),e.textContent=stringDeleteWarning,document.getElementById("locationModal").querySelector(".modal-body").appendChild(e)}function showLocations(a,e=null){let t,n,i,l,r;if(e=getLocationElement(a,e))return"region"===a?(document.getElementById("b_new_region").setAttribute("data-c-code",e.dataset.id),document.getElementById("b_new_region").setAttribute("data-s-country",e.dataset.sName),document.getElementById("b_new_region").classList.remove("hide"),document.getElementById("b_new_city").setAttribute("data-c-code",e.dataset.id),document.getElementById("b_new_city").setAttribute("data-s-country",e.dataset.id),document.getElementById("b_new_city").setAttribute("data-id-region",""),document.getElementById("b_new_city").classList.add("hide"),document.getElementById("i_cities").innerText="",l="i_regions",r=document.getElementById(l),i="regions",n="countryId",t=e.dataset.id):"city"===a&&(document.getElementById("b_new_city").classList.remove("hide"),document.getElementById("b_new_city").setAttribute("data-id-region",e.dataset.id),l="i_cities",r=document.getElementById(l),i="cities",n="regionId",t=e.dataset.id),fetchData(baseUrl+"index.php?page=ajax&action="+i+"&"+n+"="+t).then(n=>{if(0<n.length){r.textContent="";for(let e=0,t=n.length;e<t;e++){var i=document.createElement("li"),o=(i.setAttribute("class","list-group-item"),i.setAttribute("id",a+"-"+n[e].pk_i_id),i.setAttribute("data-id",n[e].pk_i_id),i.setAttribute("data-s-name",n[e].s_name),i.setAttribute("data-s-slug",n[e].s_slug),document.createElement("input")),o=(o.setAttribute("type","checkbox"),o.setAttribute("name",a+"[]"),o.setAttribute("value",n[e].pk_i_id),o.setAttribute("onclick","checkLocations('"+l+"');"),o.setAttribute("class","form-check-input me-1"),i.appendChild(o),document.createElement("a")),d=(o.setAttribute("href","#"),o.setAttribute("class","close"),o.setAttribute("data-id",n[e].pk_i_id),o.setAttribute("title",stringDelete),o.setAttribute("onclick","deleteLocations(this,'"+a+"')"),document.createElement("i")),d=(d.setAttribute("class","bi bi-x-circle-fill"),o.appendChild(d),i.appendChild(o),document.createElement("a"));d.setAttribute("href","#"),d.setAttribute("class","edit mx-1"),d.setAttribute("data-id",n[e].pk_i_id),d.setAttribute("title",stringEdit),d.setAttribute("onclick","editLocations(this,'"+a+"')"),d.textContent=n[e].s_name,i.appendChild(d),"region"===a&&((o=document.createElement("a")).setAttribute("href","#"),o.setAttribute("class","view-more float-end"),o.setAttribute("data-id",n[e].pk_i_id),o.setAttribute("title",stringViewMore),o.setAttribute("onclick","showLocations('city',this)"),o.innerHTML=stringViewMore+"&raquo;",i.appendChild(o)),r.appendChild(i)}}else"region"===a&&(document.getElementById("b_new_region").classList.remove("hide"),document.getElementById("b_new_city").classList.add("hide")),r.innerHTML="<p class='text-center'>No "+a+" found</p>"})}function editLocations(e,t){var e=document.getElementById(t+"-"+e.dataset.id),n=[{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"edit_"+t}],n=(n.push("country"===t?{name:"country_code",value:e.dataset.id}:{name:t+"_id",value:e.dataset.id}),toggleLocationModal(stringEdit+t,"",stringSave),getHiddenInputs(n)),i=document.createElement("div"),o=(i.setAttribute("class","mb-3"),document.createElement("label")),d=(o.textContent=stringName,document.createElement("input")),o=(d.setAttribute("name","e_"+t),d.setAttribute("id","e_"+t),d.setAttribute("required","required"),d.setAttribute("class","form-control"),d.setAttribute("placeholder",stringEnter+t+" "+stringName),d.value=e.dataset.sName,i.appendChild(o),i.appendChild(d),n.appendChild(i),document.createElement("div")),d=(o.setAttribute("class","mb-3"),document.createElement("label")),i=(d.textContent=stringSlug,document.createElement("input")),t=(i.setAttribute("name","e_"+t+"_slug"),i.setAttribute("id","e_"+t+"_slug"),i.setAttribute("onchange","checkSlugs('"+t+"')"),i.setAttribute("class","form-control"),i.setAttribute("placeholder",stringEnter+t+" "+stringSlug),i.value=e.dataset.sSlug,document.createElement("div"));t.setAttribute("class","help-block"),t.textContent=stringSlugWarning,o.appendChild(d),o.appendChild(i),o.appendChild(t),n.appendChild(o),document.getElementById("locationModal").querySelector(".modal-body").appendChild(n)}function deleteLocations(e,t){e=[{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"delete_"+t},{name:"id[]",value:e.dataset.id}],toggleLocationModal(stringDelete+t,"",stringDelete),t=getHiddenInputs(e),e=document.createElement("div");e.setAttribute("class","mb-3"),e.textContent=stringDeleteWarning,document.getElementById("locationModal").querySelector(".modal-body").appendChild(e),document.getElementById("locationModal").querySelector(".modal-body").appendChild(t)}function fetchData(e,t=null){let n;return(n=null===t?fetch(e):fetch(e,{credentials:t})).then(e=>e.json()).catch(e=>{console.log(e)})}function toggleLocationModal(e,t,n){var i=document.getElementById("locationModal");i.querySelector(".modal-body").textContent=t,i.querySelector(".modal-title").textContent=e,i.querySelector("button[type='submit']").textContent=n,new bootstrap.Modal(i).toggle()}function getHiddenInputs(n){var i,o=document.createElement("fieldset");for(let e=0,t=n.length;e<t;e++)(i=document.createElement("input")).setAttribute("type","hidden"),i.setAttribute("name",n[e].name),i.setAttribute("value",n[e].value),o.appendChild(i);return o}function getLocationElement(e,t){let n;return null===t?0<e.length&&0<sCountry.length&&0<sCountryCode.length&&("region"===e?n=document.getElementById("country-"+sCountryCode):"city"===e&&0<sRegionId.length&&(n=document.getElementById("region-"+sRegionId))):"region"===e?n=document.getElementById("country-"+t.dataset.id):"city"===e&&(n=document.getElementById("region-"+t.dataset.id)),n}document.getElementById("b_import").addEventListener("click",function(){let i,o,d;toggleLocationModal(stringImportLocations,stringImportWarning,stringImport);fetchData(locationJsonUrl).then(e=>{i=e.locations;var t,n=document.createElement("select"),e=(n.setAttribute("class","form-select form-select-sm"),n.setAttribute("name","location"),n.setAttribute("id","imported-location"),n.setAttribute("required","required"),document.createElement("option"));for(e.value="",e.textContent=stringSelectOption,n.appendChild(e),o=0,d=i.length;o<d;o++)jsonExistingCountries.includes(i[o].s_country_name)||((t=document.createElement("option")).value=i[o].s_file_name,t.textContent=i[o].s_country_name,n.appendChild(t));a.appendChild(n)});let a=getHiddenInputs([{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"locations_import"}]);document.getElementById("locationModal").querySelector(".modal-body").appendChild(a)}),document.getElementById("b_new_country").addEventListener("click",function(){toggleLocationModal(stringAddCountry,"",stringAddCountry);var e=getHiddenInputs([{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"add_country"},{name:"c_manual",value:"1"}]),t=document.createElement("div"),n=(t.setAttribute("class","mb-3"),document.createElement("label")),i=(n.textContent=stringCountry,document.createElement("input")),n=(i.setAttribute("name","country"),i.setAttribute("id","country"),i.setAttribute("required","required"),i.setAttribute("class","form-control"),i.setAttribute("placeholder",stringCountryName),t.appendChild(n),t.appendChild(i),e.appendChild(t),document.createElement("div")),i=(n.setAttribute("class","mb-3"),document.createElement("label")),t=(i.textContent=stringCountryCode,document.createElement("input"));t.setAttribute("name","c_country"),t.setAttribute("minlength","2"),t.setAttribute("maxlength","2"),t.setAttribute("required","required"),t.setAttribute("id","c_country"),t.setAttribute("class","form-control"),t.setAttribute("placeholder",stringCountryCode),n.appendChild(i),n.appendChild(t),e.appendChild(n),document.getElementById("locationModal").querySelector(".modal-body").appendChild(e)}),document.getElementById("b_new_region").addEventListener("click",function(){toggleLocationModal(stringAddRegion,"",stringAddRegion);var e=[{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"add_region"},{name:"country_c_parent",value:document.getElementById("b_new_region").dataset.cCode},{name:"country_parent",value:document.getElementById("b_new_region").dataset.sCountry},{name:"r_manual",value:"1"},{name:"region_id",value:""}],e=getHiddenInputs(e),t=document.createElement("div"),n=(t.setAttribute("class","mb-3"),document.createElement("label")),i=(n.textContent=stringRegion,document.createElement("input"));i.setAttribute("name","region"),i.setAttribute("id","region"),i.setAttribute("required","required"),i.setAttribute("class","form-control"),i.setAttribute("placeholder",stringRegionName),t.appendChild(n),t.appendChild(i),e.appendChild(t),document.getElementById("locationModal").querySelector(".modal-body").appendChild(e)}),document.getElementById("b_new_city").addEventListener("click",function(){toggleLocationModal(stringAddCity,"",stringAddCity);var e=getHiddenInputs([{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"add_city"},{name:"country_c_parent",value:document.getElementById("b_new_city").dataset.cCode},{name:"country_parent",value:document.getElementById("b_new_city").dataset.sCountry},{name:"region_parent",value:document.getElementById("b_new_city").dataset.idRegion},{name:"ci_manual",value:"1"},{name:"city_id",value:""}]),t=document.createElement("div"),n=(t.setAttribute("class","mb-3"),document.createElement("label")),i=(n.textContent=stringCity,document.createElement("input"));i.setAttribute("name","city"),i.setAttribute("id","city"),i.setAttribute("required","required"),i.setAttribute("class","form-control"),i.setAttribute("placeholder",stringCityName),t.appendChild(n),t.appendChild(i),e.appendChild(t),document.getElementById("locationModal").querySelector(".modal-body").appendChild(e)}),document.getElementById("locationModal").addEventListener("hidden.bs.modal",function(){document.getElementById("locationModal").querySelector(".modal-body").textContent="",document.getElementById("locationModal").querySelector(".modal-title").textContent="",document.getElementById("locationModal").querySelector("button[type='submit']").textContent=""}),document.getElementById("b_remove_country").addEventListener("click",function(){deleteMultipleLocations("country")}),document.getElementById("b_remove_region").addEventListener("click",function(){deleteMultipleLocations("region")}),document.getElementById("b_remove_city").addEventListener("click",function(){deleteMultipleLocations("city")}),""!==sCountry&&""!==sCountryCode&&showLocations("region").then(()=>{""!==sRegionId&&showLocations("city")});
//# sourceMappingURL=location.min.js.map